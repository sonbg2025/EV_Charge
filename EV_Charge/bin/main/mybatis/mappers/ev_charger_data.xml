<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.boot.dao.EvChargerDAO">
    
    <insert id="ev_charger_update">
		INSERT INTO ev_charger_data (
		    stat_id,
		    chger_id,
		    stat_name,
		    chger_type,
		    addr,
		    addr_detail,
		    location,
		    lat,
		    lng,
		    use_time,
		    busi_id,
		    bnm,
		    busi_nm,
		    busi_call,
		    output,
		    method,
		    zcode,
		    zscode,
		    kind,
		    kind_detail,
		    parking_free,
		    note,
		    limit_yn,
		    limit_detail,
		    del_yn,
		    del_detail,
		    traffic_yn,
		    year
		) VALUES (
		    #{stat_id},
		    #{chger_id},
		    #{stat_name},
		    #{chger_type},
		    #{addr},
		    #{addr_detail},
		    #{location},
		    #{lat},
		    #{lng},
		    #{use_time},
		    #{busi_id},
		    #{bnm},
		    #{busi_nm},
		    #{busi_call},
		    #{output},
		    #{method},
		    #{zcode},
		    #{zscode},
		    #{kind},
		    #{kind_detail},
		    #{parking_free},
		    #{note},
		    #{limit_yn},
		    #{limit_detail},
		    #{del_yn},
		    #{del_detail},
		    #{traffic_yn},
		    #{year}
		)
		ON DUPLICATE KEY UPDATE
		    stat_name = VALUES(stat_name),
		    chger_type = VALUES(chger_type),
		    addr = VALUES(addr),
		    addr_detail = VALUES(addr_detail),
		    location = VALUES(location),
		    lat = VALUES(lat),
		    lng = VALUES(lng),
		    use_time = VALUES(use_time),
		    busi_id = VALUES(busi_id),
		    bnm = VALUES(bnm),
		    busi_nm = VALUES(busi_nm),
		    busi_call = VALUES(busi_call),
		    output = VALUES(output),
		    method = VALUES(method),
		    zcode = VALUES(zcode),
		    zscode = VALUES(zscode),
		    kind = VALUES(kind),
		    kind_detail = VALUES(kind_detail),
		    parking_free = VALUES(parking_free),
		    note = VALUES(note),
		    limit_yn = VALUES(limit_yn),
		    limit_detail = VALUES(limit_detail),
		    del_yn = VALUES(del_yn),
		    del_detail = VALUES(del_detail),
		    traffic_yn = VALUES(traffic_yn),
		    year = VALUES(year)
    </insert>
    
    <select id="ev_list" resultType="com.boot.dto.EvChargerDTO">
    	SELECT ev_charger_id,
		 	   stat_id,
			   chger_id,
			   stat_name,
			   chger_type,
			   addr,
			   addr_detail,
			   location,
			   lat,
			   lng,
			   use_time,
			   busi_id,
			   bnm,
			   busi_nm,
			   busi_call,
			   output,
			   method,
			   zcode,
			   zscode,
			   kind,
			   kind_detail,
			   parking_free,
			   note,
			   limit_yn,
			   limit_detail,
			   del_yn,
			   del_detail,
			   traffic_yn,
			   year
		  FROM ev_charger_data
		 WHERE lat BETWEEN #{lat} - 0.005 AND #{lat} + 0.005
		   AND lng BETWEEN #{lng} - 0.01 AND #{lng} + 0.01;
    </select>
            
</mapper>
